# Dumping of generated class files

These properties instruct the JVM to save the bytecode of dynamically generated classes to disk. Normally, these classes exist only in memory and are invisible to the user.

### Dumping properties

 - `-Djdk.invoke.LambdaMetafactory.dumpProxyClassFiles=true`

Dumps the `.class` files for the proxy classes generated to implement Java lambda expressions and method references. When the `invokedynamic` instruction for a lambda is first executed, its bootstrap method (`LambdaMetafactory.metafactory`) generates a new class on the fly. This class implements the target functional interface (e.g., `Runnable`, `Predicate<String>`) and its methods delegate to the underlying method handle. This flag saves that generated class's bytecode to a file.

 - `-Djdk.invoke.MethodHandle.dumpClassFiles`

Dumps `.class` files for various helper and adapter classes generated by the `java.lang.invoke` machinery itself. These are often small, highly-specialized classes used to implement complex `MethodHandle` transformations, such as `asType` conversions (which might require boxing, unboxing, or casting). Before the introduction of hidden classes, these were generated as regular, albeit anonymous, classes.

 - `-Djdk.invoke.MethodHandle.dumpHiddenClassFiles=true`

The modern equivalent of `dumpClassFiles`. Since Java 15 ([JEP 371]), the JVM generates these adapter classes as hidden classes. Hidden classes are designed for frameworks to generate non-discoverable, short-lived classes. This flag specifically dumps the `.class` files of these dynamically generated hidden classes.

 - `-Djdk.invoke.MethodHandle.dumpMethodHandleInternals=true`

This does not dump a `.class` file. Instead, it prints a detailed, human-readable textual representation of a `MethodHandle`'s internal structure, specifically its `LambdaForm`. The `LambdaForm` is a data structure that describes the exact sequence of low-level operations (e.g., load argument, invoke a specific method, cast a result) that will be executed when the handle is invoked.

 - `-Djdk.invoke.MethodHandleProxies.dumpClassFiles=true`

Dumps the `.class` file for proxy classes generated by `java.lang.invoke.MethodHandleProxies.asInterfaceInstance()`. This method is a utility that creates an object implementing a given interface, where all calls to the interface's methods are forwarded to a single master `MethodHandle`.

```bash
cargo run -- -Djdk.invoke.LambdaMetafactory.dumpProxyClassFiles=true -Djdk.invoke.MethodHandle.dumpClassFiles=true -Djdk.invoke.MethodHandle.dumpHiddenClassFiles=true -Djdk.invoke.MethodHandle.dumpMethodHandleInternals=true -Djdk.invoke.MethodHandleProxies.dumpClassFiles=true samples.reflection.methodhandleexample.MethodHandleExample
```

[//]: # (links)
[JEP 371]: https://openjdk.org/jeps/371
